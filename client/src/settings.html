<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">  
<html xmlns="http://www.w3.org/1999/xhtml">  
<head>  
	<meta http-equiv="Content-Type" content="text/html; charset=gb2312" />  
	<title>石家庄前兆分中心—配置页面</title>  
	<style type="text/css">  
	<!--  
	body,div,p,ul,li,font,span,td,th{  
		font-size:10pt;  
		line-height:155%;  
	}  
	table{  
		border-top-width: 1px;  
		border-right-width: 1px;  
		border-bottom-width: 0px;  
		border-left-width: 1px;  
		border-top-style: solid;  
		border-right-style: solid;  
		border-bottom-style: none;  
		border-left-style: solid;  
		border-top-color: #CCCCCC;  
		border-right-color: #CCCCCC;  
		border-bottom-color: #CCCCCC;  
		border-left-color: #CCCCCC;  
	}  
	td{  
		border-bottom-width: 1px;  
		border-bottom-style: solid;  
		border-bottom-color: #CCCCCC;  
	}  
	.EditCell_TextBox {  
		width: 90%;  
		border:1px solid #0099CC;  
	}  
	.EditCell_DropDownList {  
		width: 90%;  
	}  
	-->  
	</style>  
</head>  

<body> 
	<form id="form4" name="form4" method="post" action="">   
	</form>
	<form id="form3" name="form3" method="post" action="">  
		<h3>测项标识预警值
		<!-- <input type="button" name="Submit" value="新增" onclick="AddRow(document.getElementById('tabitems'),1)" />  
		<input type="button" name="Submit2" value="删除" onclick="DeleteRow(document.getElementById('tabitems'),1)" /> -->  
		<input type="submit" name="Submit3" value="提交修改" onclick="SaveTableData(document.getElementById('tabitems'),3);return false;" />
		<br /> 
		</h3> 
		<table width="1000" border="0" cellpadding="0" cellspacing="0" id="tabitems">  
		</table>  
	</form>
	<br /> 
	<form id="form1" name="form1" method="post" action="">  
		<h3>台站列表 		
		<!-- <input type="button" name="Submit" value="新增" onclick="AddRow(document.getElementById('tabstations'),1)" />  
		<input type="button" name="Submit2" value="删除" onclick="DeleteRow(document.getElementById('tabstations'),1)" /> -->
		<input type="submit" name="Submit3" value="提交修改" onclick="SaveTableData(document.getElementById('tabstations'),1);return false;" />
		<br /> 
		</h3> 
		<table width="1000" border="0" cellpadding="0" cellspacing="0" id="tabstations">  
		</table>  
	</form>
	<br />
	<form id="form2" name="form2" method="post" action="">  
		<h3>台站仪器详情		
		<!-- <input type="button" name="Submit" value="新增" onclick="AddRow(document.getElementById('tabinstruments'),1)" />  
		<input type="button" name="Submit2" value="删除" onclick="DeleteRow(document.getElementById('tabinstruments'),1)" /> -->  
		<input type="submit" name="Submit3" value="提交修改" onclick="SaveTableData(document.getElementById('tabinstruments'),2);return false;" />
		<br /> 
		</h3> 
		<table width="1000" border="0" cellpadding="0" cellspacing="0" id="tabinstruments">  
		</table>  
	</form> 
	<br />
	<br />
	<br />

	<script type="text/javascript" src="./scripts/jquery/1.8.2/jquery.min.js"></script>
	<script language="javascript" src="scripts/settings.js"></script>
	<script language="javascript"> 

	$(document).ready(function(){
		var url = '/stationData/settings.json';
		var tabstations = document.getElementById("tabstations");
		var tabinstruments = document.getElementById("tabinstruments"); 
		var tabitems = document.getElementById("tabitems"); 
		var tHtml ='';
		//添加表头
		var tabstationsContainer = $('#tabstations');
		tHtml =
			'<tr>'+  
				// '<td width=3% align="center" bgcolor="#EFEFEF" Name="code"><input type="checkbox" name="checkbox" value="checkbox" /></td>  '+
				'<td width=7% bgcolor="#EFEFEF" Name="code" >台站代码</td>  '+
				'<td width=30% bgcolor="#EFEFEF" Name="name" EditType="TextBox" >台站名称</td>  '+
				'<td width=20% bgcolor="#EFEFEF" Name="latitude" EditType="TextBox">纬度</td>  '+
				'<td width=20% bgcolor="#EFEFEF" Name="longitude" EditType="TextBox">经度</td>'+
				'<td width=20% bgcolor="#EFEFEF" Name="heignt" EditType="TextBox">高度</td>'+
			'</tr>';
		tabstationsContainer.append(tHtml);
		var tabinstrumentsContainer = $('#tabinstruments');
		tHtml =
			'<tr>'+  
				// '<td width=3% align="center" bgcolor="#EFEFEF" Name="code"><input type="checkbox" name="checkbox" value="checkbox" /></td>  '+
				'<td width=7% bgcolor="#EFEFEF" Name="stationCode" >台站代码</td>  '+
				'<td width=12% bgcolor="#EFEFEF" Name="stationName" >台站名称</td>  '+
				'<td width=6% bgcolor="#EFEFEF" Name="code" >测点编码</td>  '+
				'<td width=20% bgcolor="#EFEFEF" Name="name" EditType="TextBox" >仪器名称</td>  '+
				'<td width=8% bgcolor="#EFEFEF" Name="instrument" EditType="TextBox">仪器型号</td>  '+
				'<td width=12% bgcolor="#EFEFEF" Name="ip" EditType="TextBox">仪器IP 地址</td>'+
				'<td width=12% bgcolor="#EFEFEF" Name="username" EditType="TextBox">用户名</td>'+
				'<td width=10% bgcolor="#EFEFEF" Name="password" EditType="TextBox">密码</td> '+
			'</tr> ';
		tabinstrumentsContainer.append(tHtml);
		var tabitemsContainer = $('#tabitems');
		tHtml =
			'<tr>'+  
				// '<td width=5% align="center" bgcolor="#EFEFEF" Name="Num"><input type="checkbox" name="checkbox" value="checkbox" /></td>'+  
				'<td width=10% bgcolor="#EFEFEF" Name="code" >测项标识</td>  '+ 
				'<td width=25% bgcolor="#EFEFEF" Name="name" EditType="TextBox" >物理量</td>  '+ 
				'<td width=25% bgcolor="#EFEFEF" Name="min" EditType="TextBox">最小值</td>  '+ 
				'<td width=25% bgcolor="#EFEFEF" Name="max" EditType="TextBox">最大值</td> '+ 
			'</tr>';
		tabitemsContainer.append(tHtml);

		(function(url){
			$.get(url, function(settingData){
				window.settingData = settingData;

				var formRefresh = $('#form4');
				tHtml =
					'<h3>刷新频率：'+
					'<input id="refresh" type="text" name="refresh" style="width:30px; text-align: right" value="'+settingData.sysconfig.refresh+'"/>'+' 秒 '+
					'<input type="submit" name="Submit3" value="提交修改" onclick="SaveTableData(document.getElementById('+"'refresh'"+'),4);return false;" />'+
					'<br /></h3>';
				formRefresh.append(tHtml);

				//stations
				for(var i=0,l=settingData.stations.length; i<l; i++){
					tHtml =
					'<tr>  '+ 
						// '<td align="center" bgcolor="#FFFFFF"><input type="checkbox" name="checkbox" value="checkbox" /></td>  '+ 
						'<td bgcolor="#FFFFFF">'+settingData.stations[i].code+'</td>  '+ 
						'<td bgcolor="#FFFFFF">'+settingData.stations[i].name+'</td>  '+ 
						'<td bgcolor="#FFFFFF">'+settingData.stations[i].latitude+'</td>  '+ 
						'<td bgcolor="#FFFFFF">'+settingData.stations[i].longitude+'</td> '+ 
						'<td bgcolor="#FFFFFF">'+settingData.stations[i].heignt+'</td> '+ 
					'</tr>';
					tabstationsContainer.append(tHtml);

					//instruments
					for(var j=0,m=settingData.stations[i].instruments.length; j<m; j++){
						tHtml =
						'<tr>  '+ 
							// '<td align="center" bgcolor="#FFFFFF"><input type="checkbox" name="checkbox" value="checkbox" /></td>  '+ 
							'<td bgcolor="#FFFFFF">'+settingData.stations[i].code+'</td>  '+ 
							'<td bgcolor="#FFFFFF">'+settingData.stations[i].name+'</td>  '+ 
							'<td bgcolor="#FFFFFF">'+settingData.stations[i].instruments[j].code+'</td>  '+ 
							'<td bgcolor="#FFFFFF">'+settingData.stations[i].instruments[j].name+'</td>  '+ 
							'<td bgcolor="#FFFFFF">'+settingData.stations[i].instruments[j].instrument+'</td>  '+ 
							'<td bgcolor="#FFFFFF">'+settingData.stations[i].instruments[j].ip+'</td>  '+ 
							'<td bgcolor="#FFFFFF">'+settingData.stations[i].instruments[j].username+'</td>  '+ 
							'<td bgcolor="#FFFFFF">'+settingData.stations[i].instruments[j].password+'</td>  '+ 
						'</tr>';
						tabinstrumentsContainer.append(tHtml);
					}
				}

				//items
				for(var i=0,l=settingData.items.length; i<l; i++){
					tHtml =
					'<tr>  '+ 
						// '<td align="center" bgcolor="#FFFFFF"><input type="checkbox" name="checkbox" value="checkbox" /></td>  '+ 
						'<td bgcolor="#FFFFFF">'+settingData.items[i].code+'</td>  '+ 
						'<td bgcolor="#FFFFFF">'+settingData.items[i].name+'</td>  '+ 
						'<td bgcolor="#FFFFFF">'+settingData.items[i].min+'</td>  '+ 
						'<td bgcolor="#FFFFFF">'+settingData.items[i].max+'</td> '+ 
					'</tr>';
					tabitemsContainer.append(tHtml);
				}

				EditTables(tabstations,tabinstruments,tabitems);
			});
		})(url);
	});
	</script>  
</body>  
</html>